<div *ngIf="isDataAvailable === false" >
  <p class="text-center"><i class='fa fa-circle-o-notch fa-spin'></i> Loading...</p>
</div>

<div class="current-trends">
  <h1>
    Current Trends 
    <span *ngIf="usagePrediction" [style.color]="getPercentStyle(percentageIncrease)">
      <i *ngIf="percentageIncrease > 0" class="fa fa-long-arrow-up"></i><i *ngIf="percentageIncrease < 0" class="fa fa-long-arrow-down"></i>{{ absolutePercentage | number:'1.0-0' }}%
    </span> <small>Compared to Previous Cycle</small>
  </h1>
</div>
<br />
<div class="row current-cycle-usage">
  <div class="col-sm-3">
    <h3>
      So Far This Cycle
    </h3>

  </div>
  <div class="col-sm-9 progress">
    <div *ngIf="usageComparison" class="bar current progress-bar progress-bar-striped progress-bar-animated">
      <h4>
        {{ usageComparison.Meter_Read_Cycles[1].Usage | number:'1.0-0' }} kWh <small>in {{ usageComparison.Days_InTo_Current_Cycle }} days</small>
      </h4>
    </div>
    <div *ngIf="usagePrediction" class="bar progress-bar progress-bar-striped progress-bar-animated remaining-days" style="width: 30%;" [style.width]="getRemainingDaysWidth()">
      <h4 class="pull-right">
        <small>{{ remainingCycleDays }} day{{ remainingCycleDays === 1 ? '' : 's' }} remaining</small>
      </h4>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-sm-3">
    <h3>
      Previous Cycle
    </h3>

  </div>
  <div class="col-sm-9">
    <div *ngIf="usageComparison" class="bar previous">
      <h4>
        {{ usageComparison.Meter_Read_Cycles[0].Usage | number:'1.0-0' }} kWh <small>in {{ daysInLastCycle }} days</small>
      </h4>
    </div>
  </div>
</div>
<br />
<div class="row ">
  <div class="col-sm-12 text-center">
    <div class="gexstimate">

      <h2 class="text-center ">

        <span *ngIf="usageComparison">{{ usageComparison.Meter_Read_Cycles[1].Usage_Month | date:'LLLL' }}</span> Usage Gexstimate <span *ngIf="usagePrediction" [style.color]="getKwhStyle()">{{ usagePrediction.Meter_Read_Cycles[0].Usage | number:'1.0-0' }} kWh</span> </h2>

    </div>
  </div>
</div>
<br />
<div class="row">
  <div class="col-sm-8 col-sm-offset-2 col-xs-12">
    <div class="panel-group" id="accordion">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title"> <a data-toggle="collapse" data-parent="#accordion" href="#collapse1"> How is my current usage trend calculated?</a> </h4>
        </div>
        <div id="collapse1" class="panel-collapse collapse">
          <div class="panel-body">Your current usage trend is based on your electricity usage for the number of days in your current cycle compared with the same number of days in your previous cycle. </div>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title"> <a data-toggle="collapse" data-parent="#accordion" href="#collapse2"> Where does my usage estimate come from? </a></h4>
        </div>
        <div id="collapse2" class="panel-collapse collapse">
          <div class="panel-body">We multiply your average daily usage by the number of days in your current cycle. This estimate can change if there are changes in your average daily usage, or if <span *ngIf="TDU_Name">{{ TDU_Name }}</span> changes the date on which your meter is read. </div>
        </div>
      </div>
    </div>
  </div>
</div>
<br /><br />
