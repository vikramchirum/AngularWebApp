<div *ngIf="bill" class="view-bill-container">

  <h4>April 10 2017<span class="pull-right">Invoice Number # {{ bill.invoice_number }}</span></h4>

  <hr class="breaker"/>

  <div *ngFor="let charge of bill.charges">
    <div *ngIf="charge.items.length > 0; then listCharges else noChargesToList"></div>
    <ng-template #listCharges>
      <h2>
        <button class="charge-toggle" (click)="chargeToggle(charge)">
          <i class="fa fa-fw" [ngClass]="{ 'fa-chevron-down': !chargeOpened(charge), 'fa-chevron-up': chargeOpened(charge) }"></i>
        </button>
        {{ charge.title }}
      </h2>
      <table *ngIf="chargeOpened(charge)" border="0" width="100%">
        <colgroup>
          <col width="75%"/>
          <col width="20%"/>
          <col width="5%"/>
        </colgroup>
        <tbody>
        <tr *ngFor="let item of charge.items">
          <td class="bill-name"><span>{{ item.name }}</span><span class="bill-uasge" *ngIf="item.usage">{{ item.usage }}</span></td>
          <td class="bill-amount">${{ item.amount | NumberToMoneyPipe }}</td>
          <td></td>
        </tr>
        </tbody>
      </table>
      <table border="0" width="100%">
        <colgroup>
          <col width="75%"/>
          <col width="20%"/>
          <col width="5%"/>
        </colgroup>
        <tbody>
        <tr>
          <td><b>Sub Total</b></td>
          <td><b>${{ subtotal(charge) | NumberToMoneyPipe }}</b></td>
          <td></td>
        </tr>
        </tbody>
      </table>
      <br/>
    </ng-template>
    <ng-template #noChargesToList>
      <h2>{{ charge.title }} <small>(No charges to list.)</small></h2>
    </ng-template>
  </div>

  <hr class="breaker"/>

  <table border="0" width="100%">
    <colgroup>
      <col width="75%"/>
      <col width="20%"/>
      <col width="5%"/>
    </colgroup>
    <tbody>
    <tr>
      <td><h2 class="text-muted">Total</h2></td>
      <td><h2>${{ bill.total() | NumberToMoneyPipe }}</h2></td>
      <td></td>
    </tr>
    </tbody>
  </table>

  <div class="row">
    <div class="col-md-7">
      <br/>
      <button class="btn btn-wireframe"><i class="fa fa-fw fa-file-pdf-o"></i> View Full Statement</button>
    </div>
    <div class="col-md-5 text-right">
      <br/>
      <a class="btn btn-block btn-wireframe" [routerLink]="['../make-payment']">Make a Payment</a>
    </div>
  </div>

  <p class="thank-you">Thank you for your payment of $140.56 on March 10, 2017</p>

</div>
