<div class="container-fluid plans-profile">
  <br/>
  <mygexa-service-account-selector [setActiveServiceAccount]="true"></mygexa-service-account-selector>

  <ng-container *ngIf="plansServices$ | async; else loading; let plansServicesResult;">

    <div class="row">

      <div class="col-md-8">

        <ng-template *ngIf="plansServicesResult[1].Is_Account_Eligible_Renewal && !plansServicesResult[0].Current_Offer.IsHoldOverRate; then ShowRenewal else ShowCurrentPlan"></ng-template>

        <ng-template #ShowRenewal>
         <div class="row ui-renew-row">
           <div class="col-sm-7">
            <h1>Renew your plan</h1>
           </div>
           <div class="col-sm-5">
            <div class="alert alert-danger">
        Contract End Date: {{ (plansServicesResult[0].Contract_End_Date ? plansServicesResult[0].Contract_End_Date : plansServicesResult[0].Calculated_Contract_End_Date) | date: 'MM/dd/yyyy'}}
           </div>
         </div>
        </div>
          <p> <strong>Account No: {{ plansServicesResult[0].Id }}</strong><br/>Your plan is ready to be renewed! Based on your product history, we found a renewal plan that's recommended for your home.  View plan details and contract documents by clicking the information icon. </p>
        </ng-template>

        <ng-template #ShowCurrentPlan>
          <h1>My Current Plan</h1>
          <p>Account No: {{ plansServicesResult[0].Id }}</p>
        </ng-template>

        <div class="row">
          <div class="col-md-9 col-md-offset-1">
            <mygexa-my-current-plan></mygexa-my-current-plan>
          </div>
        </div>
      </div>

      <div class="col-xs-10 col-xs-offset-1 col-sm-offset-0 col-md-4">
        <mygexa-renewal-gauge [hidden]="hideGauge(plansServicesResult[0])"></mygexa-renewal-gauge>
        <mygexa-documents></mygexa-documents>
      </div>

    </div>

  </ng-container>

  <div class="row">
    <ng-template #loading><h4 class="text-muted"><i class="fa fa-spin fa-circle-o-notch"></i> Loading your account...</h4></ng-template>
  </div>

</div>
