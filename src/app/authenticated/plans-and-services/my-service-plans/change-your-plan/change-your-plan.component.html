<div *ngIf="activeServiceAccountDetails && renewalDetails; then offers else showLoadingScreen"></div>

<ng-template #offers>

  <ng-template #showRenewalOrUpgrade *ngIf="isRenewalPending || isOnHoldOver; then upgradeSection else renewalSection">
  </ng-template>

  <ng-template #renewalSection>
    <div class="row">
      <div class="col-sm-2">
        <h2> View more renewal plans </h2>
        <a  (click)="showPromoCodeInput($event)"> <p> Have a promo code?</p></a>
        <form #promoCodeForm="ngForm"  *ngIf="havePromoCode">
          <input type="text" class="form-control" id="promoCode" required
                 [(ngModel)]="promoCode" name="promoCode"><br>
          <a class="boxed btn btn-primary" [class.disabled]="!promoCodeForm.form.valid" (click)="onPromoCodeSubmit()">Submit</a></form></div>
      <div class="col-sm-9">
        <div class="row change-plans-grid">
          <section *ngIf="renewalOffersCount > 0">
            <div class="col-md-4 plan-card" *ngFor="let offer of renewalOffers; let i= index;">
              <mygexa-change-your-plan-card [offer]=offer [isRenewal] = true ></mygexa-change-your-plan-card>
            </div>
          </section>
        </div>
      </div>
      <section *ngIf="renewalOffersCount == 0" >
        <div class="row">
          <div class="col-sm-24">
            <h2> No available offers for this service account.</h2>
          </div>
        </div>
      </section>
    </div>
  </ng-template>

  <ng-template #upgradeSection>
    <div class="row">
      <div class="col-sm-2">
        <h2> Want to Upgrade your Plan? </h2>
      </div>
      <div class="col-sm-9">
        <div class="row change-plans-grid">
          <section *ngIf="upgradeOffersCount > 0">
            <div class="col-md-4 plan-card" *ngFor="let offer of upgradeOffers; let i= index;">
              <mygexa-change-your-plan-card [offer]=offer [isRenewal] = true></mygexa-change-your-plan-card>
            </div>
          </section>

          <section *ngIf="upgradeOffersCount == 0" >
            <div class="row">
              <div class="col-sm-24">
                <h2> No available offers for this service account.</h2>
              </div>
            </div>
          </section>

        </div>
      </div>
    </div>
  </ng-template>

</ng-template>

<ng-template #showLoadingScreen>
    <div class="text-center">
      <h1><i class="fa fa-spin fa-circle-o-notch"></i></h1>
      <h2>
        <small class="text-muted">Loading more offers...</small>
      </h2>
    </div>
</ng-template>

<br>

<mygexa-plan-confirmation-modal #planConfirmationModal></mygexa-plan-confirmation-modal  >
