<div *ngIf="bill_object && bill_item_details" class="view-bill-container">

  <h4>{{invoice_date | date }}<span class="pull-right">Invoice Number # {{ invoice_num }}</span></h4>

  <hr class="breaker"/>

  <div>
    <div *ngIf="bill_item_details_gexa_charges.length > 0; then listCharges else noChargesToList"></div>
    <ng-template #listCharges>
      <h2>
        <button class="charge-toggle" (click)="chargeToggle(bill_item_details_gexa_charges)">
          <i class="fa fa-fw" [ngClass]="chargeOpened(bill_item_details_gexa_charges) ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
        </button>
        Gexa Charges
      </h2>
      <table *ngIf="chargeOpened(bill_item_details_gexa_charges)" border="0" width="100%">
        <colgroup>
          <col width="75%"/>
          <col width="20%"/>
          <col width="5%"/>
        </colgroup>
        <tbody>
        <tr *ngFor="let item of bill_item_details_gexa_charges">
          <td class="bill-name"><span>{{ item.Descripton }}</span><span class="bill-uasge" *ngIf="item.Quantity">{{ item.Quantity }}</span></td>
          <td class="bill-amount">${{ item.Amount | FloatToMoneyPipe }}</td>
          <td></td>
        </tr>
        <tr *ngFor="let item of bill_item_details_other_charges">
          <td class="bill-name"><span>{{ item.Descripton }}</span></td>
          <td class="bill-amount">${{ item.Amount | FloatToMoneyPipe }}</td>
          <td></td>
        </tr>
        </tbody>
      </table>
      <table border="0" width="100%">
        <colgroup>
          <col width="75%"/>
          <col width="20%"/>
          <col width="5%"/>
        </colgroup>
        <tbody>
        <tr>
          <td><b>Sub Total</b></td>
          <td><b>${{ subtotal(bill_item_details_gexa_charges) + subtotal(bill_item_details_other_charges) | FloatToMoneyPipe}}</b></td>
          <td></td>
        </tr>
        </tbody>
      </table>
      <br/>
    </ng-template>

    <ng-template #noChargesToList>
      <h2>Gexa Charges <small>(No charges to list.)</small></h2>
    </ng-template>
  </div>

  <div>
    <div *ngIf="bill_item_details_TDU_charges.length > 0; then listTDUCharges else noTDUChargesToList"></div>
    <ng-template #listTDUCharges>
      <h2>
        <button class="charge-toggle" (click)="chargeToggle(bill_item_details_TDU_charges)">
          <i class="fa fa-fw" [ngClass]="chargeOpened(bill_item_details_TDU_charges) ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
        </button>
        TDU Charges
      </h2>
      <table *ngIf="chargeOpened(bill_item_details_TDU_charges)" border="0" width="100%">
        <colgroup>
          <col width="75%"/>
          <col width="20%"/>
          <col width="5%"/>
        </colgroup>
        <tbody>
        <tr *ngFor="let item of bill_item_details_TDU_charges">
          <td class="bill-name"><span>{{ item.Descripton }}</span></td>
          <td class="bill-amount">${{ item.Amount | FloatToMoneyPipe }}</td>
          <td></td>
        </tr>
        </tbody>
      </table>
      <table border="0" width="100%">
        <colgroup>
          <col width="75%"/>
          <col width="20%"/>
          <col width="5%"/>
        </colgroup>
        <tbody>
        <tr>
          <td><b>Sub Total</b></td>
          <td><b>${{ subtotal(bill_item_details_TDU_charges) | FloatToMoneyPipe }}</b></td>
          <td></td>
        </tr>
        </tbody>
      </table>
      <br/>
    </ng-template>

    <ng-template #noTDUChargesToList>
      <h2>TDU Charges <small>(No TDU charges to list.)</small></h2>
    </ng-template>
  </div>

  <div>
    <div *ngIf="bill_item_details_tax.length > 0; then listTaxCharges else noTaxChargesToList"></div>
    <ng-template #listTaxCharges>
      <h2>
        <button class="charge-toggle" (click)="chargeToggle(bill_item_details_tax)">
          <i class="fa fa-fw" [ngClass]="chargeOpened(bill_item_details_tax) ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
        </button>
        Tax Charges
      </h2>
      <table *ngIf="chargeOpened(bill_item_details_tax)" border="0" width="100%">
        <colgroup>
          <col width="75%"/>
          <col width="20%"/>
          <col width="5%"/>
        </colgroup>
        <tbody>
        <tr *ngFor="let item of bill_item_details_tax">
          <td class="bill-name"><span>{{ item.Descripton }}</span></td>
          <td class="bill-amount">${{ item.Amount | FloatToMoneyPipe }}</td>
          <td></td>
        </tr>
        </tbody>
      </table>
      <table border="0" width="100%">
        <colgroup>
          <col width="75%"/>
          <col width="20%"/>
          <col width="5%"/>
        </colgroup>
        <tbody>
        <tr>
          <td><b>Sub Total</b></td>
          <td><b>${{ subtotal(bill_item_details_tax) | FloatToMoneyPipe}}</b></td>
          <td></td>
        </tr>
        </tbody>
      </table>
      <br/>
    </ng-template>

    <ng-template #noTaxChargesToList>
      <h2>Tax Charges <small>(No tax charges to list.)</small></h2>
    </ng-template>
  </div>

  <hr class="breaker"/>

  <table border="0" width="100%">
    <colgroup>
      <col width="75%"/>
      <col width="20%"/>
      <col width="5%"/>
    </colgroup>
    <tbody>
    <tr>
      <td><h2 class="text-muted">Total</h2></td>
      <td><h2>${{ subtotal(bill_item_details_gexa_charges) + subtotal(bill_item_details_other_charges) + subtotal(bill_item_details_TDU_charges) +  subtotal(bill_item_details_tax) | FloatToMoneyPipe}}</h2></td>
      <td></td>
    </tr>
    </tbody>
  </table>

  <div class="row">
    <div class="col-md-7">
      <br/>
      <button class="btn btn-wireframe"><i class="fa fa-fw fa-file-pdf-o"></i> View Full Statement</button>
    </div>
    <div class="col-md-5 text-right">
      <br/>
      <a class="btn btn-block btn-wireframe" routerLink="/payments/make-payment">Make a Payment</a>
    </div>
  </div>

  <p class="thank-you">Thank you for your payment of $140.56 on March 10, 2017</p>

</div>
